<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="description" content="">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>2017-12-14-02</title>
  <link rel="alternate" type="application/rss+xml" title="" href="feed/index.html">
  <link href="http://fonts.googleapis.com/css?family=Raleway:700,300" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/prettify.css">
</head>

<body>
  <div class="wrapper">
    <header>
      <div class="container">
        <h2 class="lone-header">字符串操作升级：爬虫 C# & Python</h2>
      </div>
    </header>


    <section>
      <div class="container">
        <div class="docs-content">
          <h3 id="welcome"> 主要内容</h3>
          <p>任务要求：</p>
          <p>
            <h4>学习网络请求，并且通过字符串匹配（可以使用正则表达式和xpath以及其他文本匹配包）
            </h4>
          </p>
          <p>本次网址为<a href="http://sjz.58.com/chuzu/?PGTID=0d100000-000f-1ffa-6127-cf515cf7a53e&ClickID=1">http://sjz.58.com/chuzu/?PGTID=0d100000-000f-1ffa-6127-cf515cf7a53e&ClickID=1</a></p>
          <p>
                提示：
                <a href="http://www.runoob.com/regexp/regexp-syntax.html" target="_blank">正则表达式点这里</a>
                <a href="http://www.runoob.com/xpath/xpath-tutorial.html" target="_blank">xpath表达式点这里</a>
          </p>

          <h3 id="view_type">1.此次学习主要内容</h3>
          <ul>
              <li>Python以及C#的网络请求模块</li>
              <li>通过网络请求得到网页文本信息</li>
              <li>通过表达式匹配出一些信息（比如文本）</li>
              <li>C#的同学有兴趣还可以写成窗体。窗体可以用winform，也可以用WPF以及UWP等</li>
          </ul>

          <h3 id="view_type">2.一些提示</h3>
          <p>C#网页请求：</p>
          <pre class="prettyprint">
            using System.Web;//需要添加这个引用
            //网页请求，需要声明一个CookieContainer变量记录cookie
            private string GetResultHtml(string url, CookieContainer cookie, string refer)
            {
                var html = "";
                var webRequest = WebRequest.Create(url) as HttpWebRequest;
                webRequest.Method = "GET";
                webRequest.CookieContainer = cookie;
                webRequest.Referer = refer;
                webRequest.Timeout = 20000;
                webRequest.Headers.Add("X-Requested-With:XMLHttpRequest");
                webRequest.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8";
                webRequest.UserAgent = " Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0)";
                using (var webResponse = (HttpWebResponse)webRequest.GetResponse())
                {
                    using (var reader = new StreamReader(webResponse.GetResponseStream(), Encoding.UTF8))
                    {
    
                        html = reader.ReadToEnd();
                        reader.Close();
                        webResponse.Close();
                    }
                }
                return html;
            }
          </pre>
          <p>C#正则表达式</p>
          <pre class="prettyprint">
            using System.Text.RegularExpressions;//需要添加这个引用
            Regex re = new Regex(@"var game=Array(.*)[^(var)]");
            string asd = re.Match(BaseResultHtml).ToString();
          </pre>
          <p>Python网络请求</p>
          <pre class="prettyprint">
            from urllib import request
            html=request.urlopen('url').read()
          </pre>
          <p>Python使用正则表达式</p>
          <pre class="prettyprint">
            import re
            text=re.findall('表达式')
          </pre>
          <p>除了正则表达式，还有xpath可用</p>
        </div>
    </section>

    <footer>
      <div>
        <p> &copy;LSGO学习信息发布平台</p>
      </div>
    </footer>
    </div>
    <script src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/prettify/prettify.js"></script>
    <script src="https://cdn.bootcss.com/prettify/r298/run_prettify.js"></script>
    <script src="js/layout.js"></script>
</body>

</html>